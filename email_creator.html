<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Generador de correos electrónicos</title>
    <style>
      :root {
        color-scheme: light dark;
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        line-height: 1.6;
      }

      body {
        margin: 0;
        background: linear-gradient(135deg, #f6f8ff 0%, #eef2ff 100%);
        color: #1f2933;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2.5rem 1.25rem;
      }

      .contenedor {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 18px;
        box-shadow: 0 20px 45px rgba(15, 23, 42, 0.1);
        max-width: 760px;
        width: min(100%, 760px);
        padding: clamp(1.75rem, 3vw, 2.5rem);
      }

      h1 {
        margin-top: 0;
        margin-bottom: 1rem;
        font-size: clamp(1.8rem, 4vw, 2.4rem);
        color: #1a1a3b;
        text-align: center;
      }

      p.descripcion {
        margin-top: 0;
        text-align: center;
        color: #445066;
      }

      form {
        display: grid;
        gap: 1rem 1.5rem;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        margin-top: 1.75rem;
      }

      label {
        display: flex;
        flex-direction: column;
        font-weight: 600;
        color: #1f2933;
        gap: 0.45rem;
        font-size: 0.95rem;
      }

      input[type="number"],
      input[type="text"] {
        appearance: none;
        border: 1px solid #cbd2d9;
        border-radius: 12px;
        font-size: 1rem;
        padding: 0.65rem 0.75rem;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }

      input[type="number"]:focus,
      input[type="text"]:focus {
        outline: none;
        border-color: #6366f1;
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
      }

      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        height: 28px;
      }

      .acciones {
        grid-column: 1 / -1;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
        margin-top: 0.5rem;
      }

      .ayuda {
        color: #64748b;
        font-size: 0.9rem;
      }

      button {
        border: none;
        background: linear-gradient(135deg, #6366f1, #8b5cf6);
        color: white;
        font-weight: 600;
        padding: 0.9rem 1.6rem;
        border-radius: 999px;
        cursor: pointer;
        font-size: 1rem;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 18px rgba(99, 102, 241, 0.3);
      }

      button:active {
        transform: translateY(0);
      }

      .mensaje-error {
        grid-column: 1 / -1;
        color: #d14343;
        background-color: #fde8e8;
        border-radius: 12px;
        padding: 0.75rem 1rem;
        display: none;
      }

      .mensaje-error.visible {
        display: block;
      }

      .resultados {
        margin-top: 2.5rem;
        background: #f8fafc;
        border-radius: 16px;
        padding: 1.5rem;
        box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.05);
      }

      .resultados h2 {
        margin-top: 0;
        font-size: 1.2rem;
        color: #1f2933;
        display: flex;
        align-items: baseline;
        gap: 0.5rem;
      }

      .resultados h2 span {
        font-size: 0.9rem;
        color: #64748b;
        font-weight: normal;
      }

      .acciones-resultados {
        margin-top: 1.5rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
      }

      .acciones-resultados button {
        flex: 1 1 200px;
      }

      .lista-correos {
        margin: 0;
        margin-top: 1rem;
        padding-left: 1.25rem;
        display: grid;
        gap: 0.5rem;
      }

      .lista-correos li {
        list-style: decimal inside;
        background: white;
        border-radius: 12px;
        padding: 0.6rem 0.9rem;
        color: #1f2933;
        box-shadow: 0 4px 10px rgba(15, 23, 42, 0.08);
        font-family: "Fira Code", "Courier New", monospace;
      }

      .oculto {
        display: none;
      }

      @media (max-width: 540px) {
        body {
          padding: 1.5rem;
        }

        .contenedor {
          padding: 1.5rem;
        }

        .lista-correos {
          padding-left: 0.85rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="contenedor">
      <h1>Generador de correos electrónicos</h1>
      <p class="descripcion">
        Configura cuántas letras y números deseas antes del símbolo <code>@</code>,
        indica el dominio y decide cuántas direcciones diferentes quieres obtener.
      </p>
      <form id="email-form" novalidate>
        <label for="letters">
          Cantidad de letras
          <input
            id="letters"
            name="letters"
            type="number"
            min="0"
            step="1"
            inputmode="numeric"
            value="5"
            required
          />
        </label>
        <label for="numbers">
          Cantidad de números
          <input
            id="numbers"
            name="numbers"
            type="number"
            min="0"
            step="1"
            inputmode="numeric"
            value="3"
            required
          />
        </label>
        <label for="domain">
          Dominio del correo
          <input
            id="domain"
            name="domain"
            type="text"
            placeholder="ej. gmail.com"
            autocomplete="email"
            required
          />
        </label>
        <label for="quantity">
          ¿Cuántos correos deseas?
          <input
            id="quantity"
            name="quantity"
            type="number"
            min="1"
            max="100"
            step="1"
            inputmode="numeric"
            value="1"
            required
          />
        </label>
        <div class="acciones">
          <button type="submit">Generar correos</button>
          <p class="ayuda">
            Puedes generar hasta 100 correos por vez. Todos los caracteres se
            crearán de forma aleatoria.
          </p>
        </div>
        <p class="mensaje-error" id="error" role="alert"></p>
      </form>
      <section class="resultados oculto" id="resultados" aria-live="polite">
        <h2>
          Correos generados
          <span id="cantidad"></span>
        </h2>
        <ol class="lista-correos" id="lista"></ol>
        <div
          class="acciones-resultados oculto"
          id="acciones-resultados"
          aria-label="Acciones disponibles"
        >
          <button type="button" id="copiar-correos">Copiar correos</button>
          <button type="button" id="descargar-correos">Descargar TXT</button>
        </div>
      </section>
    </div>
    <script>
      const form = document.getElementById("email-form");
      const lettersInput = document.getElementById("letters");
      const numbersInput = document.getElementById("numbers");
      const domainInput = document.getElementById("domain");
      const quantityInput = document.getElementById("quantity");
      const errorBox = document.getElementById("error");
      const resultsSection = document.getElementById("resultados");
      const quantityLabel = document.getElementById("cantidad");
      const resultsList = document.getElementById("lista");
      const actionsContainer = document.getElementById("acciones-resultados");
      const copyButton = document.getElementById("copiar-correos");
      const downloadButton = document.getElementById("descargar-correos");

      const letras = "abcdefghijklmnopqrstuvwxyz";
      const numeros = "0123456789";

      function mostrarError(mensaje) {
        errorBox.textContent = mensaje;
        errorBox.classList.add("visible");
      }

      function limpiarError() {
        errorBox.textContent = "";
        errorBox.classList.remove("visible");
      }

      function mezclar(arreglo) {
        for (let i = arreglo.length - 1; i > 0; i -= 1) {
          const j = Math.floor(Math.random() * (i + 1));
          [arreglo[i], arreglo[j]] = [arreglo[j], arreglo[i]];
        }
        return arreglo;
      }

      function generarCorreo(cantidadLetras, cantidadNumeros, dominio) {
        const caracteres = [];

        for (let i = 0; i < cantidadLetras; i += 1) {
          const indice = Math.floor(Math.random() * letras.length);
          caracteres.push(letras[indice]);
        }

        for (let i = 0; i < cantidadNumeros; i += 1) {
          const indice = Math.floor(Math.random() * numeros.length);
          caracteres.push(numeros[indice]);
        }

        mezclar(caracteres);
        const local = caracteres.join("");
        return `${local}@${dominio}`;
      }

      function obtenerCorreosGenerados() {
        return Array.from(resultsList.querySelectorAll("li"), (item) =>
          item.textContent.trim()
        ).filter((texto) => texto.length > 0);
      }

      async function copiarCorreos() {
        const correos = obtenerCorreosGenerados();
        if (correos.length === 0) {
          mostrarError("No hay correos disponibles para copiar.");
          return;
        }

        const texto = correos.join("\n");

        try {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            await navigator.clipboard.writeText(texto);
          } else {
            const areaTemporal = document.createElement("textarea");
            areaTemporal.value = texto;
            areaTemporal.setAttribute("readonly", "");
            areaTemporal.style.position = "absolute";
            areaTemporal.style.left = "-9999px";
            document.body.appendChild(areaTemporal);
            areaTemporal.select();
            const copiado = document.execCommand("copy");
            areaTemporal.remove();
            if (!copiado) {
              throw new Error("Error al copiar con execCommand");
            }
          }
          limpiarError();
        } catch (error) {
          mostrarError(
            "No fue posible copiar los correos automáticamente. Puedes descargarlos en un archivo."
          );
        }
      }

      function descargarCorreos() {
        const correos = obtenerCorreosGenerados();
        if (correos.length === 0) {
          mostrarError("No hay correos disponibles para descargar.");
          return;
        }

        const contenido = correos.join("\n");
        const blob = new Blob([contenido], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const enlace = document.createElement("a");

        const marcaDeTiempo = new Date()
          .toISOString()
          .replace(/[:T]/g, "-")
          .slice(0, 19);

        enlace.href = url;
        enlace.download = `correos-${marcaDeTiempo}.txt`;
        document.body.appendChild(enlace);
        enlace.click();
        enlace.remove();
        URL.revokeObjectURL(url);
        limpiarError();
      }

      function validarDominio(dominio) {
        if (!dominio) {
          return "El dominio no puede estar vacío.";
        }

        if (dominio.includes("@")) {
          return "No incluyas el símbolo '@' en el dominio.";
        }

        if (dominio.startsWith(".") || dominio.endsWith(".")) {
          return "El dominio no puede comenzar ni terminar con un punto.";
        }

        if (dominio.includes(" ")) {
          return "El dominio no puede contener espacios.";
        }

        return null;
      }

      form.addEventListener("submit", (evento) => {
        evento.preventDefault();
        limpiarError();

        const letrasSolicitadas = Number.parseInt(lettersInput.value, 10);
        const numerosSolicitados = Number.parseInt(numbersInput.value, 10);
        const dominio = domainInput.value.trim().toLowerCase();
        const cantidadSolicitada = Number.parseInt(quantityInput.value, 10);

        if (Number.isNaN(letrasSolicitadas) || letrasSolicitadas < 0) {
          mostrarError("Introduce una cantidad válida de letras (0 o más).");
          lettersInput.focus();
          return;
        }

        if (Number.isNaN(numerosSolicitados) || numerosSolicitados < 0) {
          mostrarError("Introduce una cantidad válida de números (0 o más).");
          numbersInput.focus();
          return;
        }

        if (letrasSolicitadas === 0 && numerosSolicitados === 0) {
          mostrarError("Debes elegir al menos una letra o un número.");
          lettersInput.focus();
          return;
        }

        const errorDominio = validarDominio(dominio);
        if (errorDominio) {
          mostrarError(errorDominio);
          domainInput.focus();
          return;
        }

        if (
          Number.isNaN(cantidadSolicitada) ||
          cantidadSolicitada < 1 ||
          cantidadSolicitada > Number.parseInt(quantityInput.max, 10)
        ) {
          mostrarError(
            `La cantidad de correos debe estar entre 1 y ${quantityInput.max}.`
          );
          quantityInput.focus();
          return;
        }

        const fragmento = document.createDocumentFragment();
        for (let i = 0; i < cantidadSolicitada; i += 1) {
          const correo = generarCorreo(
            letrasSolicitadas,
            numerosSolicitados,
            dominio
          );
          const item = document.createElement("li");
          item.textContent = correo;
          fragmento.appendChild(item);
        }

        resultsList.innerHTML = "";
        resultsList.appendChild(fragmento);
        quantityLabel.textContent = `(${cantidadSolicitada})`;
        resultsSection.classList.remove("oculto");
        actionsContainer.classList.remove("oculto");
      });

      copyButton.addEventListener("click", () => {
        copiarCorreos();
      });

      downloadButton.addEventListener("click", () => {
        descargarCorreos();
      });
    </script>
  </body>
</html>
